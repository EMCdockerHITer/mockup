define(["jquery"],function(a,b){var c={patterns:{},warn:function(a){window.DEBUG&&console.warn(a)},getOptions:function(b,d,e){e=e||{},0===b.length||a.nodeName(b[0],"body")||(e=c.getOptions(b.parent(),d,e));var f={};if(0!==b.length&&(f=b.data("pat-"+d),f&&"string"==typeof f)){var g={};a.each(f.split(";"),function(a,b){if(b=b.split(":"),b.length>=1){b.reverse();var c=b.pop();c=c.replace(/^\s+|\s+$/g,""),b.reverse();var d=b.join(":");d=d.replace(/^\s+|\s+$/g,""),g[c]=d}}),f=g}return a.extend(!0,{},e,f)},init:function(a,d,e){var f=a.data("pattern-"+d);if(f===b&&c.patterns[d]){if(window.DEBUG)f=new c.patterns[d](a,c.getOptions(a,d,e));else try{f=new c.patterns[d](a,c.getOptions(a,d,e))}catch(g){c.warn('Failed while initializing "'+d+'" pattern.')}a.data("pattern-"+d,f)}return f},scan:function(b){var d=a(b),e=[];e=a.merge(e,d.filter('[class*="pat-"]')),e=a.merge(e,a('[class*="pat-"]',d)),a.each(e,function(b,d){d=a(d),a.each(d.attr("class").split(" "),function(a,b){0===b.indexOf("pat-")&&c.init(d,b.substr(4))})})},register:function(d){return d.prototype.name?(d.prototype.jqueryPlugin===b&&(d.prototype.jqueryPlugin="pattern"+d.prototype.name.charAt(0).toUpperCase()+d.prototype.name.slice(1)),a.fn[d.prototype.jqueryPlugin]=function(e,f){return a(this).each(function(){"object"==typeof e&&(f=e,e=b);var g=a(this),h=c.init(g,d.prototype.name,f);if(e){if(h[e]===b)return c.warn('Method "'+e+'" does not exists.'),!1;if("_"===e.charAt(0))return c.warn('Method "'+e+'" is private.'),!1;h[e].apply(h,[f])}}),this},c.patterns[d.prototype.name]=d,void 0):(c.warn("Pattern didn't specified a name."),!1)}};return c});