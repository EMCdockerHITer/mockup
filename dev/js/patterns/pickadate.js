define(["jquery","mockup-patterns-base","picker","picker.date","picker.time"],function(a,b){"use strict";var c=b.extend({name:"pickadate",defaults:{separator:" ",date:{selectYears:!0,selectMonths:!0},time:{},classWrapperName:"pattern-pickadate-wrapper",classSeparatorName:"pattern-pickadate-separator",classDateName:"pattern-pickadate-date",classDateWrapperName:"pattern-pickadate-date-wrapper",classTimeName:"pattern-pickadate-time",classTimeWrapperName:"pattern-pickadate-time-wrapper",classClearName:"pattern-pickadate-clear",placeholderDate:"Enter date...",placeholderTime:"Enter time..."},isFalse:function(a){return"string"==typeof a&&"false"===a?!1:a},init:function(){var b=this,c=b.$el.val().split(" "),d=c[0]||"",e=c[1]||"";b.options.date=b.isFalse(b.options.date),b.options.time=b.isFalse(b.options.time),b.options.date===!1&&(e=c[0]),b.$el.hide(),b.$wrapper=a("<div/>").addClass(b.options.classWrapperName).insertAfter(b.$el),b.options.date!==!1&&(b.options.date.formatSubmit="yyyy-mm-dd",b.$date=a('<input type="text"/>').attr("placeholder",b.options.placeholderDate).attr("data-value",d).addClass(b.options.classDateName).appendTo(a("<div/>").addClass(b.options.classDateWrapperName).appendTo(b.$wrapper)).pickadate(a.extend(!0,{},b.options.date,{onSet:function(a){void 0!==a.select&&(b.$date.attr("data-value",a.select),(b.options.time===!1||""!==b.$time.attr("data-value"))&&b.updateValue.call(b)),a.hasOwnProperty("clear")&&(b.$el.removeAttr("value"),b.$date.attr("data-value",""))}}))),b.options.date!==!1&&b.options.time!==!1&&(b.$separator=a("<span/>").addClass(b.options.classSeparatorName).html(" "===b.options.separator?"&nbsp;":b.options.separator).appendTo(b.$wrapper)),b.options.time!==!1&&(b.options.time.formatSubmit="HH:i",b.$time=a('<input type="text"/>').attr("placeholder",b.options.placeholderTime).attr("data-value",e).addClass(b.options.classTimeName).appendTo(a("<div/>").addClass(b.options.classTimeWrapperName).appendTo(b.$wrapper)).pickatime(a.extend(!0,{},b.options.time,{onSet:function(a){void 0!==a.select&&(b.$time.attr("data-value",a.select),(b.options.date===!1||""!==b.$date.attr("data-value"))&&b.updateValue.call(b)),a.hasOwnProperty("clear")&&(b.$el.removeAttr("value"),b.$time.attr("data-value",""))}})),"string"==typeof e&&"00"===e.substring(0,2)&&(b.$time.pickatime("picker").set("select",e.split(":")),b.$time.attr("data-value",e))),b.$clear=a("<div/>").addClass(b.options.classClearName).appendTo(b.$wrapper)},updateValue:function(){var a=this,b="";if(a.options.date!==!1){var c=a.$date.data("pickadate").component,d=a.$date.data("pickadate").get("select"),e=c.formats.toString;b+=e.apply(c,["yyyy-mm-dd",d])}if(a.options.date!==!1&&a.options.time!==!1&&(b+=" "),a.options.time!==!1){var f=a.$time.data("pickatime").component,g=a.$time.data("pickatime").get("select"),h=f.formats.toString;b+=h.apply(f,["HH:i",g])}a.$el.attr("value",b),a.trigger("updated")}});return c});