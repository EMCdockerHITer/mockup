define(["jquery","mockup-patterns-base","dropzone"],function(a,b,c){"use strict";c.autoDiscover=!1;var d=b.extend({name:"dropzone",defaults:{url:null,className:"dropzone",paramName:"file",uploadMultiple:!1,clickable:!1,wrap:!1,wrapperTemplate:'<div class="dropzone-container"/>',resultTemplate:'<div class="dz-notice"><p>Drop files here...</p></div><div class="dropzone-previews"/>',autoCleanResults:!1,previewsContainer:".dropzone-previews"},init:function(){var b=this;if("string"==typeof b.options.clickable&&(b.options.clickable="true"===b.options.clickable?!0:!1),!b.options.url&&"FORM"===b.$el[0].tagName){var d=b.$el.attr("action");d||(d=window.location.href),b.options.url=d}var e=b.$el;if(b.options.wrap){{e.wrap}"inner"===b.options.wrap?(e.wrapInner(b.options.wrapperTemplate),e=e.children().eq(0)):(e.wrap(b.options.wrapperTemplate),e=e.parent())}e.append('<div class="dz-notice"><p>Drop files here...</p></div>'),".dropzone-previews"===b.options.previewsContainer&&e.append('<div class="dropzone-previews"/>');var f=b.options.autoCleanResults;e.addClass(b.options.className);var g=a.extend({},b.options);if(delete g.wrap,delete g.wrapperTemplate,delete g.resultTemplate,delete g.autoCleanResults,b.options.previewsContainer){var h=e.find(b.options.previewsContainer);h.length>0&&(g.previewsContainer=h[0])}b.dropzone=new c(e[0],g),b.$dropzone=e,f&&b.dropzone.on("complete",function(b){setTimeout(function(){a(b.previewElement).fadeOut()},3e3)})}});return d});