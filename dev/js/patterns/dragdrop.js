define(["jquery","mockup-patterns-base","jquery.event.drag","jquery.event.drop"],function(a,b){"use strict";var c=b.extend({name:"dragdrop",defaults:{selector:"li",dragClass:"item-dragging",cloneClass:"dragging",drop:null},init:function(){var b=this,c=0;b.$el.find(b.options.selector).drag("start",function(){var d=this;return a(d).addClass(b.options.dragClass),a.drop({tolerance:function(c,d,e){if(0!==a(e.elem).closest(b.$el).length){var f=c.pageY>e.top+e.height/2;return a.data(e.elem,"drop+reorder",f?"insertAfter":"insertBefore"),this.contains(e,[c.pageX,c.pageY])}}}),c=a(this).index(),a(this).clone().addClass(b.options.cloneClass).css({opacity:.75,position:"absolute"}).appendTo(document.body)}).drag(function(b,c){a(c.proxy).css({top:c.offsetY,left:c.offsetX});var d=c.drop[0],e=a.data(d||{},"drop+reorder");e&&d&&(d!=c.current||e!=c.method)&&(a(this)[e](d),c.current=d,c.method=e,c.update())}).drag("end",function(d,e){var f=a(this);f.removeClass(b.options.dragClass),a(e.proxy).remove(),b.options.drop&&b.options.drop(f,f.index()-c)}).drop("init",function(a,b){return this==b.drag?!1:!0})}});return c});