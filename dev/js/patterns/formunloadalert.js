define(["jquery","mockup-patterns-base"],function(a,b){"use strict";var c=b.extend({name:"formunloadalert",_changed:!1,_suppressed:!1,defaults:{message:"Discard changes? If you click OK, any changes you have made will be lost.",changingEvents:"change keyup paste",changingFields:"input,select,textarea,fileupload"},init:function(){var b=this;b.$el.is("form")&&(a(b.options.changingFields,b.$el).on(b.options.changingEvents,function(){b._changed=!0}),a(window).on("beforeunload",function(a){return b._handle_unload(b,a)}),b.$el.on("submit",function(){b._suppressed=!0}))},_handle_unload:function(a,b){if(a._suppressed)return a._suppressed=!1,void 0;if(a._changed){var c=a.options.message;return(b||window.event).returnValue=c,c}}});return c});