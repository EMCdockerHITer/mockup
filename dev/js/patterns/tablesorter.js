define(["jquery","mockup-patterns-base"],function(a,b){"use strict";var c=b.extend({name:"tablesorter",defaults:{},sortabledataclass:function(a){var b,c;return b=new RegExp("sortabledata-([^ ]*)","g"),c=b.exec(a.attr("class")),c?c[1]:null},sortable:function(a){var b=this,c=b.sortabledataclass(a);return null===c&&(c=a.text()),"-"===c.charAt(4)||"-"===c.charAt(7)||isNaN(parseFloat(c))?c.toLowerCase():parseFloat(c)},sort:function(b){var c,d,e,f,g,h,i,j,k,l=this;c=a(b).closest("th"),d=a("th",a(b).closest("thead")).index(c),e=a(b).parents("table:first"),f=e.find("tbody:first"),k=parseInt(e.attr("sorted")||"-1",10),g=k===d,a(b).parent().find("th .sortdirection").html("&#x2003;"),a(b).children(".sortdirection").html(g?"&#x25bc;":"&#x25b2;"),h=a(b).parent().children("th").index(b),i=[],j=!0,f.find("tr").each(function(){var b,c;b=a(this).children("td"),c=l.sortable.apply(l,[b.slice(h,h+1)]),isNaN(c)&&(j=!1),i.push([c,l.sortable.apply(l,[b.slice(1,2)]),l.sortable.apply(l,[b.slice(0,1)]),this])}),i.length&&(j?i.sort(function(a,b){return a[0]-b[0]}):i.sort(),g&&i.reverse(),e.attr("sorted",g?"":d),f.append(a.map(i,function(a){return a[3]})),f.each(l.setoddeven))},setoddeven:function(){var b=a(this);b.find("tr").removeClass("odd").removeClass("even").filter(":odd").addClass("even").end().filter(":even").addClass("odd")},init:function(){var b=this,c=a("<span>&#x2003;</span>").addClass("sortdirection");b.$el.find("thead th").append(c.clone()).css("cursor","pointer").on("click",function(){b.sort.apply(b,[this])}),b.$el.children("tbody").each(b.setoddeven)}});return c});