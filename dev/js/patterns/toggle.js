define(["jquery","mockup-patterns-base"],function(a,b){"use strict";var c=b.extend({name:"toggle",defaults:{attribute:"class",event:"click",externalClose:!0,preventDefault:!0,menu:"global"},ensureBool:function(a){return"string"==typeof a?"true"===a?!0:!1:a},init:function(){var b=this;b.options.externalClose=b.ensureBool(b.options.externalClose),b.options.preventDefault=b.ensureBool(b.options.preventDefault),b.$target=b.options.target?"global"===b.options.menu?a(b.options.target):b.$el[b.options.menu](b.options.target):b.$el,b.$target||a.error('No target found for "'+b.options.target+'".'),b.on(b.options.event,function(a){return b.toggle(),a.stopPropagation(),b.options.preventDefault?!1:void 0}),b.options.externalClose&&a("html").on(b.options.event,function(){b.remove()})},isMarked:function(){for(var a=this,b=!1,c=0;c<this.$target.length;c+=1)if(this.$target.eq(c)[0]!==a.$el[0])if("class"===a.options.attribute){if(!this.$target.eq(c).hasClass(this.options.value)){b=!1;break}b=!0}else{if(this.$target.eq(c).attr(this.options.attribute)!==this.options.value){b=!1;break}b=!0}return b},toggle:function(){var a=this;a.isMarked()?a.remove():a.add()},remove:function(){var a=this;a.trigger("remove-attr"),"class"===a.options.attribute?a.$target.removeClass(a.options.value):a.$target.removeAttr(a.options.attribute),a.trigger("attr-removed")},add:function(){var a=this;a.trigger("add-attr"),"class"===a.options.attribute?a.$target.addClass(a.options.value):a.$target.attr(a.options.attribute,a.options.value),a.trigger("added-attr")}});return c});